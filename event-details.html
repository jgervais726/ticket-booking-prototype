<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Details</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
    }

    h1 { color: #0077cc; }

    .seat-map {
        display: grid;
        grid-template-columns: repeat(11, 50px); /* 10 seats + 1 for aisle */
        grid-auto-rows: 60px;
        gap: 5px;
        margin-bottom: 20px;
        justify-content: center;
    }

    .aisle { background: transparent; cursor: default; }

    .seat {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        cursor: pointer;
        border-radius: 5px;
        font-weight: bold;
        user-select: none;
        font-size: 12px;
        text-align: center;
    }

    .available { background:#002a57; }
    .handicap { background:#5bc0de; }
    .obstructed { background:#f3b012; }
    .taken { background:#d1d1d1; cursor: not-allowed; }
    .selected { background:#28a745; }

    .handicap-icon {
        font-size: 16px;
        margin-top: 2px;
    }

    .legend {
        display: flex;
        gap: 20px;
        margin-top: 20px;
    }

    .legend .box {
        width: 20px;
        height: 20px;
        display: inline-block;
        margin-right: 5px;
        vertical-align: middle;
        border-radius: 3px;
    }

    p.total { font-size: 18px; font-weight: bold; text-align: center; }
</style>
</head>
<body>
<!-- Navigation Buttons -->
<div style="text-align:center; margin-bottom:20px;">
    <a href="index.html" style="padding:10px 15px; background:#0077cc; color:white; border-radius:5px; text-decoration:none; margin-right:10px;">Back to Home</a>
    <button onclick="alert('Order confirmation not available in prototype.')" style="padding:10px 15px; background:#28a745; color:white; border:none; border-radius:5px; cursor:pointer;">Confirm Order</button>
</div>
<h1>Event Details - Test Event</h1>

<h2>Seat Selection</h2>
<div class="seat-map" id="seatMap"></div>
<p class="total">Total Price: $<span id="totalPrice">0</span></p>

<!-- Legend -->
<div class="legend">
    <div><div class="box" style="background:#002a57;"></div>Available</div>
    <div><div class="box" style="background:#5bc0de;"></div>Handicap Accessible</div>
    <div><div class="box" style="background:#f3b012;"></div>Obstructed View</div>
    <div><div class="box" style="background:#d1d1d1;"></div>Taken</div>
    <div><div class="box" style="background:#28a745;"></div>Selected</div>
</div>

<script>
const seatMap = document.getElementById("seatMap");
const totalPriceEl = document.getElementById("totalPrice");

const rows = ["A","B","C","D","E","F","G","H"];
const colsPerBlock = 5; // 2 blocks of 5 seats
const aisleIndex = 5; // column index for aisle

const handicapCorners = ["A1","A5","A6","A10","D1","D5","D6","D10","E1","E5","E6","E10","H1","H5","H6","H10"];
const obstructedSeats = ["B3","C3","F3","G3"];
const takenSeats = ["C2","D4","F2","H7"];
const rowPrices = { "A":100, "B":90, "C":80, "D":70, "E":70, "F":60, "G":50, "H":50 };

let seats = [];
let selectedSeats = [];

// Generate seats with aisle
rows.forEach(row=>{
    for(let i=0; i<(colsPerBlock*2 +1); i++){ // +1 for aisle
        if(i===aisleIndex){
            seats.push({id:null,type:"aisle",price:0});
            continue;
        }
        let col = i < aisleIndex ? i+1 : i; // adjust for aisle
        const id = row+col;
        let type = "available";
        let price = rowPrices[row] || 50;

        if(handicapCorners.includes(id)) type="handicap";
        else if(obstructedSeats.includes(id)) { type="obstructed"; price=Math.floor(price*0.8);}
        else if(takenSeats.includes(id)) { type="taken"; price=0;}

        seats.push({id,type,price});
    }
});

seats.forEach(seat=>{
    const div = document.createElement("div");
    if(seat.type==="aisle") {
        div.className = "aisle";
    } else {
        div.className = `seat ${seat.type}`;
        if(seat.type==="handicap"){
            div.innerHTML = `${seat.id}<br><span class="handicap-icon">â™¿</span>`;
        } else {
            div.textContent = seat.id;
        }

        div.dataset.price = seat.price;

        if(seat.type !== "taken"){
            div.addEventListener("click", ()=>{
                if(div.classList.contains("selected")){
                    div.classList.remove("selected");
                    selectedSeats = selectedSeats.filter(s=>s.id!==seat.id);
                } else {
                    div.classList.add("selected");
                    selectedSeats.push(seat);
                }
                updateTotal();
            });
        } else {
            div.title="Seat Taken";
        }
    }
    seatMap.appendChild(div);
});

function updateTotal(){
    const total = selectedSeats.reduce((sum,s)=>sum+s.price,0);
    totalPriceEl.textContent = total;
}
</script>

</body>
</html>
